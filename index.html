<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NDIBET ELITE - Officiel</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --gold: #ffcc00; --dark: #0b0e11; --card: #1c2127; --green: #00ff88; --red: #ff4d4d; }
        body { background: var(--dark); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; padding-bottom: 80px; overflow-x: hidden; }
        
        /* HEADER */
        .header { background: #161a1e; padding: 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--gold); position: sticky; top: 0; z-index: 1000; }
        .bal-badge { background: rgba(255, 204, 0, 0.1); padding: 8px 15px; border-radius: 20px; border: 1px solid var(--gold); color: var(--gold); font-weight: bold; font-size: 1.1rem; }

        /* GRAPHIQUE */
        .stats { background: #000; margin: 10px; padding: 10px; border-radius: 10px; border: 1px solid #333; }
        #chart { width: 100% !important; height: 100px !important; }

        /* NAVIGATION JEUX */
        .tabs { display: flex; overflow-x: auto; background: #1c2127; padding: 10px; gap: 15px; border-bottom: 1px solid #333; }
        .tab { color: #848e9c; font-weight: bold; cursor: pointer; white-space: nowrap; font-size: 0.8rem; padding: 5px; text-transform: uppercase; }
        .tab.active { color: var(--gold); border-bottom: 2px solid var(--gold); }

        /* ZONE DE JEU */
        .game-area { max-width: 450px; margin: 10px auto; background: var(--card); border-radius: 20px; padding: 15px; text-align: center; }
        .screen { width: 100%; height: 230px; background: #000; border-radius: 15px; margin-bottom: 15px; position: relative; overflow: hidden; border: 2px solid #333; display: flex; justify-content: center; align-items: center; }

        /* PENALTY ENGINE */
        .pitch { width: 100%; height: 100%; background: linear-gradient(to top, #1b5e20, #2ecc71); display: none; position: relative; }
        .goal { position: absolute; top: 30px; left: 50%; transform: translateX(-50%); width: 180px; height: 90px; border: 3px solid white; border-bottom: none; }
        #gk { position: absolute; top: 60px; left: 50%; transform: translateX(-50%); font-size: 40px; transition: 0.3s; z-index: 5; }
        #ball { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); font-size: 30px; transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 10; }

        /* INPUTS & BOUTONS */
        .mise-box { margin-bottom: 15px; }
        input { background: #000; border: 1px solid #444; color: var(--gold); padding: 12px; border-radius: 10px; width: 80%; text-align: center; font-weight: bold; font-size: 1.1rem; }
        .btn-play { background: linear-gradient(180deg, #ffcc00, #ff9900); border: none; color: black; padding: 15px; border-radius: 12px; font-weight: 900; width: 100%; cursor: pointer; text-transform: uppercase; }

        /* FOOTER */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; background: #161a1e; display: flex; justify-content: space-around; padding: 12px 0; border-top: 1px solid #333; z-index: 1000; }
        .nav-item { color: #848e9c; font-size: 0.75rem; text-align: center; cursor: pointer; }
        .nav-item.active { color: var(--gold); }
        .btn-dep { background: var(--green); color: white; border: none; padding: 8px 15px; border-radius: 8px; font-weight: bold; }
    </style>
</head>
<body>

<div class="header">
    <div style="font-weight: 900; font-size: 1.2rem;">NDI<span style="color:var(--gold)">BET</span></div>
    <div class="bal-badge"><span id="solde-val">0</span> F</div>
</div>

<div class="tabs">
    <div class="tab active" onclick="setG('p', this)">âš½ PENALTY</div>
    <div class="tab" onclick="setG('c', this)">ðŸš€ CRASH</div>
    <div class="tab" onclick="setG('r', this)">ðŸŽ¡ ROULETTE</div>
    <div class="tab" onclick="setG('d', this)">ðŸŽ² DÃ‰S</div>
</div>

<div class="stats">
    <canvas id="chart"></canvas>
</div>

<div class="game-area">
    <div class="screen">
        <div id="u-p" class="pitch" style="display:block;"><div class="goal"></div><div id="gk">ðŸ§¤</div><div id="ball">âš½</div></div>
        <div id="u-c" style="display:none; color:var(--green); font-size:3.5rem; font-weight:900;">1.00x</div>
        <div id="u-r" style="display:none; color:var(--gold); font-size:3.5rem; font-weight:900;">0</div>
        <div id="u-d" style="display:none; font-size:4rem;">ðŸŽ²</div>
    </div>

    <div class="mise-box">
        <label style="font-size: 0.7rem; color: #888;">MISE (MIN 100F - MAX 10500F)</label><br>
        <input type="number" id="mise-amt" value="100">
    </div>

    <div id="ctrl-p">
        <div style="display:flex; gap:10px;">
            <button class="btn-play" onclick="playP('left')">GAUCHE</button>
            <button class="btn-play" onclick="playP('right')">DROITE</button>
        </div>
    </div>
    <div id="ctrl-c" style="display:none;"><button id="c-btn" class="btn-play" onclick="playC()">LANCER CRASH</button></div>
    <div id="ctrl-r" style="display:none;">
        <input type="number" id="r-num" placeholder="NumÃ©ro (0-36)" style="width:40%; margin-bottom:10px;"><br>
        <button class="btn-play" onclick="playR()">TOURNER LA ROUE</button>
    </div>
    <div id="ctrl-d" style="display:none;"><button class="btn-play" onclick="playD()">LANCER LES DÃ‰S</button></div>

    <p id="msg" style="color:var(--gold); font-weight:bold; margin-top:15px; font-size: 0.9rem;"></p>
</div>

<div class="bottom-nav">
    <div class="nav-item active">Accueil</div>
    <button class="btn-dep" onclick="actionW('depot')">DÃ‰PÃ”T</button>
    <div class="nav-item" onclick="actionW('retrait')">Retrait</div>
</div>

<script>
    let bal = 0; // DÃ©marre Ã  0 pour contrÃ´le total
    let history = [0]; let labels = ["0"];
    let isC = false; let cV = 1.0; let cI;

    // AUDIO
    function speak(t) { let u = new SpeechSynthesisUtterance(t); u.lang = 'fr-FR'; window.speechSynthesis.speak(u); }

    // CHART ENGINE
    const ctx = document.getElementById('chart').getContext('2d');
    let chart = new Chart(ctx, {
        type: 'line',
        data: { labels: labels, datasets: [{ data: history, borderColor: '#ffcc00', borderWidth: 2, fill: true, backgroundColor: 'rgba(255,204,0,0.1)', tension: 0.4 }] },
        options: { plugins: { legend: { display: false } }, scales: { x: { display: false }, y: { display: false } } }
    });

    function updateStats() {
        history.push(bal); labels.push("");
        if(history.length > 10) { history.shift(); labels.shift(); }
        chart.update();
        document.getElementById('solde-val').innerText = bal;
    }

    function setG(g, el) {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        el.classList.add('active');
        ['p','c','r','d'].forEach(x => {
            document.getElementById('u-'+x).style.display = (x === g ? (x==='p'?'block':'flex') : 'none');
            document.getElementById('ctrl-'+x).style.display = (x === g ? 'block' : 'none');
        });
    }

    function playP(dir) {
        let bet = parseInt(document.getElementById('mise-amt').value);
        if(bal < bet || bet < 100 || bet > 10500) return alert("VÃ©rifiez votre solde (100F min)");
        
        const b = document.getElementById('ball'); const gk = document.getElementById('gk');
        let gkDir = Math.random() > 0.5 ? 'left' : 'right';
        gk.style.left = gkDir === 'left' ? "30%" : "70%";
        b.style.bottom = "160px"; b.style.left = dir === 'left' ? "35%" : "65%";

        setTimeout(() => {
            if(dir !== gkDir) { bal += bet; speak("But ! Bravo Boss."); }
            else { bal -= bet; speak("ArrÃªtÃ© par le gardien."); }
            updateStats();
            setTimeout(() => { b.style.bottom="20px"; b.style.left="50%"; gk.style.left="50%"; }, 1000);
        }, 500);
    }

    function playC() {
        let bet = parseInt(document.getElementById('mise-amt').value);
        if(bal < bet) return alert("DÃ©pÃ´t requis");
        let btn = document.getElementById('c-btn');
        if(!isC) {
            isC = true; cV = 1.0; btn.innerText = "CASH OUT";
            let boom = (Math.random()*4 + 1.1).toFixed(2);
            speak("L'avion dÃ©colle");
            cI = setInterval(() => {
                cV += 0.08; document.getElementById('u-c').innerText = cV.toFixed(2) + "x";
                if(cV >= boom) {
                    clearInterval(cI); isC = false; btn.innerText = "EXPLOSÃ‰ !";
                    bal -= bet; updateStats(); speak("Explosion.");
                }
            }, 100);
        } else {
            clearInterval(cI); isC = false;
            let gain = Math.floor(bet * cV); bal += gain; updateStats();
            btn.innerText = "MISER " + bet; speak("GagnÃ© " + gain);
        }
    }

    function playR() {
        let bet = parseInt(document.getElementById('mise-amt').value);
        let n = document.getElementById('r-num').value;
        if(!n || n > 36 || bal < bet) return alert("Infos invalides");
        let res = Math.floor(Math.random()*37);
        document.getElementById('u-r').innerText = res;
        if(parseInt(n) === res) { bal += bet * 35; speak("Jackpot numÃ©ro " + res); }
        else { bal -= bet; speak("NumÃ©ro " + res); }
        updateStats();
    }

    function playD() {
        let bet = parseInt(document.getElementById('mise-amt').value);
        if(bal < bet) return alert("Solde insuffisant");
        let d = Math.floor(Math.random()*6)+1;
        document.getElementById('u-d').innerText = "ðŸŽ² " + d;
        bal += (d > 3) ? bet : -bet;
        updateStats();
        speak(d > 3 ? "GagnÃ©" : "Perdu");
    }

    function actionW(type) {
        let msg = `NDIBET - ${type.toUpperCase()}%0ANom:%20%0AMontant:%20${bal}F%0A(JOINDRE CAPTURE D'Ã‰CRAN)`;
        window.location.href = `https://wa.me/2250707656355?text=${msg}`;
    }
</script>
</body>
</html>
