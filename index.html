<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>√âlite Play ‚öΩ - Officiel</title>
    <style>
        :root { --red: #ff0000; --white: #ffffff; --gray: #333; --dark: #f8f9fa; }
        body { background: var(--white); color: var(--gray); font-family: 'Segoe UI', Arial, sans-serif; margin: 0; padding-bottom: 90px; overflow-x: hidden; user-select: none; }
        .header { background: var(--red); color: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 4px solid #b30000; position: sticky; top: 0; z-index: 1000; }
        .bal-badge { background: white; color: var(--red); padding: 8px 15px; border-radius: 20px; font-weight: 900; font-size: 1.2rem; border: 2px solid #b30000; }
        .tabs { display: flex; background: #eee; border-bottom: 1px solid #ddd; overflow-x: auto; }
        .tab { flex: 1; min-width: 80px; padding: 15px 5px; text-align: center; color: var(--gray); cursor: pointer; font-size: 0.6rem; font-weight: bold; text-transform: uppercase; border-right: 1px solid #ddd; }
        .tab.active { background: var(--red); color: white; }
        .container { max-width: 450px; margin: 0 auto; padding: 15px; text-align: center; }
        .game-box { background: white; border-radius: 15px; padding: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); border: 1px solid #eee; margin-bottom: 20px; }
        
        /* AVIATOR & MINES GRAPHICS */
        #avi-display { background: #000; height: 160px; border-radius: 10px; position: relative; overflow: hidden; margin-bottom: 5px; border: 2px solid #333; }
        #avi-mult { position: absolute; top: 40%; left: 50%; transform: translate(-50%, -50%); font-size: 3rem; font-weight: 900; color: var(--red); z-index: 10; }
        #avi-plane { position: absolute; bottom: 20px; left: 20px; font-size: 2.2rem; transition: 0.1s linear; z-index: 5; }
        .grid-mines { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; margin: 15px 0; }
        .cell { aspect-ratio: 1; background: #ddd; border-radius: 8px; border: none; font-size: 1.2rem; cursor: pointer; box-shadow: 0 4px 0 #bbb; }
        #mines-graph { height: 8px; width: 0%; background: #00ff88; border-radius: 5px; margin-bottom: 10px; transition: width 0.3s; }
        
        /* PLINKO */
        #pli-display { background: #000; height: 180px; border-radius: 10px; position: relative; overflow: hidden; margin-bottom: 10px; }
        .p-ball { width: 12px; height: 12px; background: var(--red); border-radius: 50%; position: absolute; top: 10px; left: 50%; transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .p-slots { display: flex; position: absolute; bottom: 0; width: 100%; gap: 2px; }
        .slot { flex: 1; font-size: 0.5rem; padding: 5px 0; background: #222; color: white; border-top: 2px solid var(--red); }

        /* GOBELETS (4EME JEU) */
        .cup-container { display: flex; justify-content: space-around; margin: 20px 0; position: relative; height: 100px; }
        .cup { font-size: 3.5rem; cursor: pointer; transition: transform 0.3s; position: relative; z-index: 2; }
        .cup.lift { transform: translateY(-30px); }
        .ball-under { position: absolute; bottom: 10px; font-size: 1.5rem; z-index: 1; display: none; }

        input, select { width: 100%; padding: 12px; margin: 8px 0; border: 2px solid #ddd; border-radius: 10px; box-sizing: border-box; font-weight: bold; text-align: center; }
        .btn-action { background: var(--red); color: white; border: none; padding: 15px; border-radius: 12px; width: 100%; font-weight: 900; cursor: pointer; text-transform: uppercase; box-shadow: 0 4px 0 #b30000; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.98); z-index: 2000; justify-content: center; align-items: center; }
        .modal-content { background: white; padding: 30px; border-radius: 25px; width: 85%; max-width: 380px; text-align: center; position: relative; max-height: 80vh; overflow-y: auto; }
        .footer { position: fixed; bottom: 0; width: 100%; background: white; display: flex; justify-content: space-around; padding: 12px 0; border-top: 2px solid #eee; z-index: 900; }
        .user-card { background: #f4f4f4; padding: 10px; border-radius: 10px; margin-bottom: 8px; text-align: left; font-size: 0.8rem; border-left: 4px solid var(--red); }
        .history-list { display: flex; gap: 5px; justify-content: center; margin-bottom: 10px; overflow-x: auto; padding: 5px; }
        .hist-item { background: #eee; padding: 2px 8px; border-radius: 10px; font-size: 0.7rem; font-weight: bold; color: var(--red); border: 1px solid #ddd; }
    </style>
</head>
<body>

<div class="modal" id="authModal">
    <div class="modal-content">
        <h2 style="color:var(--red);">√âLITE PLAY ‚öΩ</h2>
        <input type="text" id="p_name" placeholder="Pseudo">
        <input type="tel" id="p_tel" placeholder="T√©l√©phone">
        <button class="btn-action" onclick="saveUser()">ENTRER</button>
    </div>
</div>

<div class="modal" id="adminModal">
    <div class="modal-content">
        <span onclick="closeM()" style="position:absolute; top:15px; right:20px; font-weight:bold; cursor:pointer;">X</span>
        <h3>PANEL BOSS üëë</h3>
        <div id="boss_login">
            <input type="password" id="boss_code" placeholder="Code BOSS99">
            <button class="btn-action" onclick="authBoss()">ENTRER</button>
        </div>
        <div id="boss_tools" style="display:none; margin-top:15px;">
            <button class="btn-action" style="background:#000; margin-bottom:10px;" onclick="showRegistry()">üìã REGISTRE</button>
            <button class="btn-action" style="background:#333; margin-bottom:10px;" onclick="genTicket()">üéüÔ∏è CODE TEMPORAIRE</button>
            <button class="btn-action" style="background:#333; margin-bottom:10px;" onclick="rechargeByID()">üí∞ RECHARGE PAR ID</button>
            <button class="btn-action" style="background:#000;" onclick="godMode()">üî• ILLIMIT√â</button>
            <div id="registry_list"></div>
        </div>
    </div>
</div>

<div class="header">
    <div onclick="openM()"><span id="id_tag" style="font-weight:bold; font-size:0.85rem;">SESSION...</span></div>
    <div class="bal-badge"><span id="solde">0</span> F</div>
</div>

<div class="tabs">
    <div class="tab active" id="tab-avi" onclick="game('avi')">üöÄ Aviator</div>
    <div class="tab" id="tab-min" onclick="game('min')">üí£ Mines</div>
    <div class="tab" id="tab-pli" onclick="game('pli')">üé± Plinko</div>
    <div class="tab" id="tab-cup" onclick="game('cup')">üè∫ Gobelets</div>
    <div class="tab" id="tab-wal" onclick="game('wal')">üí≥ Caisse</div>
</div>

<div class="container">
    <div id="g-avi">
        <div class="history-list" id="avi-hist"></div>
        <div class="game-box">
            <div id="avi-display"><div id="avi-mult">1.00x</div><div id="avi-plane">‚úàÔ∏è</div></div>
            <input type="number" id="m_avi" value="100">
            <button class="btn-action" id="b_avi_start" onclick="startAvi()">PARIER</button>
            <button class="btn-action" id="b_avi_cash" style="display:none; background:#00ff88; color:black;" onclick="cashAvi()">ENCAISSER</button>
        </div>
    </div>

    <div id="g-min" style="display:none;">
        <div class="game-box">
            <div id="mi_stat" style="font-weight:bold; color:var(--red);">GAIN: 0 F</div>
            <div id="mines-graph"></div>
            <div class="grid-mines" id="mi_grid"></div>
            <select id="mine-count"><option value="3">3 Mines</option><option value="5" selected>5 Mines</option><option value="10">10 Mines</option></select>
            <input type="number" id="m_min" value="100">
            <button class="btn-action" id="b_mi_start" onclick="startMin()">LANCER</button>
            <button class="btn-action" id="b_mi_cash" style="display:none; background:#00ff88; color:black;" onclick="cashMin()">ENCAISSER</button>
        </div>
    </div>

    <div id="g-pli" style="display:none;">
        <div class="game-box">
            <div id="pli-display">
                <div id="p-ball" class="p-ball" style="display:none;"></div>
                <div class="p-slots">
                    <div class="slot">x5</div><div class="slot">x2</div><div class="slot">x0.5</div><div class="slot">x0.2</div><div class="slot">x0.5</div><div class="slot">x2</div><div class="slot">x5</div>
                </div>
            </div>
            <button class="btn-action" onclick="startPli()">LANCER (100 F)</button>
        </div>
    </div>

    <div id="g-cup" style="display:none;">
        <div class="game-box">
            <h3 id="cup-status">Trouve la bille !</h3>
            <div class="cup-container">
                <div class="cup" id="cup0" onclick="chooseCup(0)">üè∫<div class="ball-under" id="ball0">‚öΩ</div></div>
                <div class="cup" id="cup1" onclick="chooseCup(1)">üè∫<div class="ball-under" id="ball1">‚öΩ</div></div>
                <div class="cup" id="cup2" onclick="chooseCup(2)">üè∫<div class="ball-under" id="ball2">‚öΩ</div></div>
            </div>
            <input type="number" id="m_cup" value="100">
            <button class="btn-action" id="b_cup_start" onclick="startCup()">JOUER (Cote x2.8)</button>
        </div>
    </div>

    <div id="g-wal" style="display:none;">
        <div class="game-box">
            <h4>üí≥ CAISSE</h4>
            <input type="text" id="t_code" placeholder="Code Ticket">
            <button class="btn-action" style="background:#555; margin-bottom:10px;" onclick="useTicket()">VALIDER CODE</button>
            <button class="btn-action" style="background:#25D366;" onclick="wa('depot')">D√âP√îT WAVE</button>
        </div>
        <div class="game-box">
            <h4>üí∏ RETRAIT</h4>
            <input type="number" id="r_amt" placeholder="Montant">
            <button class="btn-action" onclick="retrait()">DEMANDER RETRAIT</button>
        </div>
    </div>
</div>

<div class="footer"><div onclick="location.reload()" style="cursor:pointer; font-weight:900; color:var(--red);">üîÑ ACTUALISER</div></div>

<script>
    let bal = 0, pseudo = "", tel = "", id = "", isGod = false, gameOn = false;
    let aviM = 1.0, aviIv, minT = [], minR = 0, minM = 0;
    let aviHistory = ["1.10x", "2.50x", "1.02x"];

    window.onload = function() {
        renderHistory();
        let savedID = localStorage.getItem('user_id');
        if(savedID) {
            id = savedID; pseudo = localStorage.getItem('user_pseudo');
            bal = parseInt(localStorage.getItem('bal_' + id)) || 0;
            document.getElementById('id_tag').innerText = "ID: " + id;
            document.getElementById('authModal').style.display = 'none';
            updateUI();
        } else { document.getElementById('authModal').style.display = 'flex'; }
    };

    function updateUI() { 
        document.getElementById('solde').innerText = isGod ? "ILLIMIT√â" : bal; 
        if(id) localStorage.setItem('bal_' + id, bal); 
    }

    function saveUser() {
        let inputP = document.getElementById('p_name').value.trim();
        let inputT = document.getElementById('p_tel').value.trim();
        if(inputP.length < 2) return alert("Pseudo !");
        let registry = JSON.parse(localStorage.getItem('elite_registry') || "[]");
        let user = registry.find(u => u.pseudo === inputP);
        if(!user) {
            id = "EP-" + Math.floor(1000 + Math.random() * 9000);
            registry.push({pseudo: inputP, tel: inputT, id: id, date: new Date().toLocaleString()});
            localStorage.setItem('elite_registry', JSON.stringify(registry));
        } else { id = user.id; }
        localStorage.setItem('user_id', id); localStorage.setItem('user_pseudo', inputP);
        location.reload();
    }

    // --- PANEL BOSS ---
    function rechargeByID() {
        let tid = prompt("ID Membre :"); let amt = prompt("Montant :");
        if(tid && amt) {
            let b = parseInt(localStorage.getItem('bal_' + tid)) || 0;
            localStorage.setItem('bal_' + tid, b + parseInt(amt));
            alert("Recharg√© !"); if(id === tid) location.reload();
        }
    }

    // --- MOTEUR AVIATOR ---
    function startAvi() {
        let m = parseInt(document.getElementById('m_avi').value);
        if(bal < m && !isGod) return alert("Solde !");
        if(!isGod) bal -= m; updateUI(); gameOn = true; aviM = 1.0;
        document.getElementById('b_avi_start').style.display='none'; document.getElementById('b_avi_cash').style.display='block';
        let crash = Math.random() < 0.30 ? (Math.random()*3+1.5) : (Math.random()*0.2+1.01);
        aviIv = setInterval(() => {
            aviM += 0.04; document.getElementById('avi-mult').innerText = aviM.toFixed(2)+"x";
            document.getElementById('avi-plane').style.transform = `translate(${aviM*10}px, -${aviM*10}px)`;
            if(aviM >= crash) {
                clearInterval(aviIv); aviHistory.push(aviM.toFixed(2)+"x"); renderHistory();
                document.getElementById('avi-mult').innerText = "PARTI !"; gameOn = false;
                setTimeout(() => { document.getElementById('b_avi_start').style.display='block'; document.getElementById('b_avi_cash').style.display='none'; }, 2000);
            }
        }, 100);
    }
    function cashAvi() { clearInterval(aviIv); bal += Math.floor(parseInt(document.getElementById('m_avi').value)*aviM); gameOn=false; updateUI(); document.getElementById('b_avi_start').style.display='block'; document.getElementById('b_avi_cash').style.display='none'; }

    // --- MOTEUR MINES ---
    function startMin() {
        minM = parseInt(document.getElementById('m_min').value); let count = parseInt(document.getElementById('mine-count').value);
        if(bal < minM && !isGod) return alert("Solde !");
        if(!isGod) bal -= minM; updateUI(); gameOn = true; minR = 0; minT = [];
        while(minT.length < count) { let r = Math.floor(Math.random()*25); if(!minT.includes(r)) minT.push(r); }
        const grid = document.getElementById('mi_grid'); grid.innerHTML = "";
        for(let i=0; i<25; i++) {
            let c = document.createElement('button'); c.className = "cell";
            c.onclick = () => {
                if(!gameOn || c.innerText !== "") return;
                if(minT.includes(i) || Math.random() > 0.35) { c.style.background="red"; c.innerText="üí£"; gameOn=false; alert("BOOM !"); }
                else { c.style.background="#00ff88"; c.innerText="üíé"; minR++; updateUI(); 
                       document.getElementById('mi_stat').innerText="GAIN: "+Math.floor(minM*(1+(minR*(count/5))))+" F";
                       document.getElementById('mines-graph').style.width = (minR*4)+"%"; }
            }; grid.appendChild(c);
        }
        document.getElementById('b_mi_start').style.display='none'; document.getElementById('b_mi_cash').style.display='block';
    }
    function cashMin() { bal += Math.floor(minM*(1+(minR*(parseInt(document.getElementById('mine-count').value)/5)))); gameOn=false; updateUI(); document.getElementById('b_mi_start').style.display='block'; document.getElementById('b_mi_cash').style.display='none'; }

    // --- MOTEUR PLINKO ---
    function startPli() {
        if(bal < 100 && !isGod) return alert("Solde !");
        if(!isGod) bal -= 100; updateUI();
        let ball = document.getElementById('p-ball'); ball.style.display="block"; ball.style.top="10px";
        let res = Math.random() < 0.30 ? [2, 5][Math.floor(Math.random()*2)] : [0.2, 0.5][Math.floor(Math.random()*2)];
        let slotIdx = [5, 2, 0.5, 0.2, 0.5, 2, 5].indexOf(res);
        setTimeout(() => { ball.style.top="160px"; ball.style.left=(slotIdx*14+7)+"%"; }, 100);
        setTimeout(() => { bal+=Math.floor(100*res); updateUI(); ball.style.display="none"; }, 1000);
    }

    // --- MOTEUR GOBELETS ---
    let winningCup = -1;
    function startCup() {
        let m = parseInt(document.getElementById('m_cup').value);
        if(bal < m && !isGod) return alert("Solde !");
        if(!isGod) bal -= m; updateUI(); gameOn = true;
        winningCup = Math.floor(Math.random()*3);
        document.querySelectorAll('.cup').forEach(c => c.classList.remove('lift'));
        document.querySelectorAll('.ball-under').forEach(b => b.style.display='none');
        document.getElementById('cup-status').innerText = "M√©lange en cours...";
        setTimeout(() => { document.getElementById('cup-status').innerText = "Choisissez un gobelet !"; }, 1000);
    }
    function chooseCup(i) {
        if(!gameOn || winningCup === -1) return;
        gameOn = false;
        document.getElementById('cup'+i).classList.add('lift');
        document.getElementById('ball'+winningCup).style.display = 'block';
        if(i === winningCup && Math.random() > 0.40) { // Loi 40%
            let win = Math.floor(parseInt(document.getElementById('m_cup').value)*2.8);
            bal += win; updateUI(); document.getElementById('cup-status').innerText = "GAGN√â ! +"+win+"F";
        } else {
            document.getElementById('cup-status').innerText = "PERDU !";
            document.getElementById('cup'+winningCup).classList.add('lift');
        }
    }

    // --- FONCTIONS ADMIN ---
    function authBoss() { if(document.getElementById('boss_code').value === "BOSS99") { document.getElementById('boss_login').style.display='none'; document.getElementById('boss_tools').style.display='block'; } }
    function godMode() { isGod = true; updateUI(); closeM(); }
    function genTicket() { let a = prompt("Montant ?"); let c = "EP-"+Math.floor(1000+Math.random()*9000); localStorage.setItem(c, a); alert("CODE: "+c); }
    function useTicket() { let c = document.getElementById('t_code').value.trim(); let a = localStorage.getItem(c); if(a){bal+=parseInt(a);localStorage.removeItem(c);updateUI();alert("OK!");} }
    function renderHistory() { const h = document.getElementById('avi-hist'); h.innerHTML = ""; aviHistory.slice(-6).forEach(x => { h.innerHTML += `<div class="hist-item">${x}</div>`; }); }
    function openM() { document.getElementById('adminModal').style.display='flex'; }
    function closeM() { document.getElementById('adminModal').style.display='none'; }
    function game(g) { document.querySelectorAll('.container > div').forEach(d => d.style.display='none'); document.getElementById('g-'+g).style.display='block'; }
    function showRegistry() { let r = JSON.parse(localStorage.getItem('elite_registry') || "[]"); let l = document.getElementById('registry_list'); l.innerHTML = ""; r.reverse().forEach(u => { l.innerHTML += `<div class="user-card"><b>${u.pseudo}</b> - ${u.tel}<br>ID: ${u.id}</div>`; }); }
    function wa(t) { window.open(`https://wa.me/2250707656355?text=D√©p√¥t ID: ${id}`); }
    function retrait() {
        let a = parseInt(document.getElementById('r_amt').value); if(a < 500) return alert("Min 500 F"); if(bal < a) return alert("Solde bas");
        let f = a >= 5000 ? Math.floor(a * 0.05) : 0; bal -= a; updateUI();
        window.open(`https://wa.me/2250707656355?text=RETRAIT ID: ${id} | MONTANT: ${a}F | NET: ${a-f}F`);
    }
</script>
</body>
</html>
