<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NDIBET - Elite Betting</title>
    <style>
        :root { --gold: #ffcc00; --dark: #0b0e11; --card: #1c2127; --green: #00ff88; --red: #ff4d4d; }
        body { background: var(--dark); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; padding-bottom: 90px; overflow: hidden; }
        
        /* HEADER */
        .header { background: #161a1e; padding: 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--gold); position: sticky; top: 0; z-index: 1000; }
        .bal-badge { background: rgba(255, 204, 0, 0.1); padding: 8px 15px; border-radius: 20px; border: 1px solid var(--gold); color: var(--gold); font-weight: bold; }

        /* TABS */
        .tabs { display: flex; overflow-x: auto; background: #1c2127; padding: 10px; gap: 15px; border-bottom: 1px solid #333; }
        .tab { color: #848e9c; font-weight: bold; cursor: pointer; white-space: nowrap; padding-bottom: 5px; text-transform: uppercase; font-size: 0.8rem; }
        .tab.active { color: var(--gold); border-bottom: 2px solid var(--gold); }

        /* GAME WINDOW */
        .game-window { max-width: 420px; margin: 15px auto; background: var(--card); border-radius: 20px; padding: 15px; text-align: center; box-shadow: 0 10px 40px rgba(0,0,0,0.6); }
        .screen { width: 100%; height: 240px; background: #000; border-radius: 15px; margin-bottom: 15px; position: relative; overflow: hidden; border: 2px solid #333; display: flex; justify-content: center; align-items: center; }
        
        /* PENALTY ENGINE */
        .pitch { width: 100%; height: 100%; background: linear-gradient(to top, #1b5e20, #2ecc71); position: relative; display: none; }
        .cage { position: absolute; top: 30px; left: 50%; transform: translateX(-50%); width: 200px; height: 100px; border: 4px solid white; border-bottom: none; background: rgba(255,255,255,0.1); }
        #ball { position: absolute; bottom: 25px; left: 50%; transform: translateX(-50%); font-size: 35px; transition: all 0.5s ease-out; z-index: 10; }

        /* UI JEUX */
        .big-val { font-size: 3.5rem; font-weight: 900; }
        .btn-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .btn-gold { background: linear-gradient(180deg, #ffcc00, #ff9900); border: none; color: black; padding: 16px; border-radius: 12px; font-weight: 900; cursor: pointer; }

        /* FOOTER */
        .footer-nav { position: fixed; bottom: 0; width: 100%; background: #25d366; color: white; text-align: center; padding: 18px; font-weight: bold; text-decoration: none; font-size: 1.1rem; }
        
        /* MODAL */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 2000; justify-content: center; align-items: center; }
        .modal-content { background: var(--card); width: 85%; padding: 25px; border-radius: 20px; border: 1px solid var(--gold); }
        input { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; border: 1px solid #333; background: #0b0e11; color: white; box-sizing: border-box; }
    </style>
</head>
<body>

<div class="header">
    <div style="display: flex; align-items: center; gap: 10px;">
        <img src="icon.png" style="width:35px; border-radius:50%; border:1px solid var(--gold);">
        <span style="font-weight: 900;">NDIBET</span>
    </div>
    <div class="bal-badge"><span id="solde">5000</span> F</div>
</div>

<div class="tabs">
    <div class="tab active" onclick="setGame('p', this)">âš½ Penalty</div>
    <div class="tab" onclick="setGame('c', this)">ðŸš€ Crash</div>
    <div class="tab" onclick="setGame('r', this)">ðŸŽ¡ Roulette</div>
    <div class="tab" onclick="setGame('d', this)">ðŸŽ² DÃ©s</div>
</div>

<div class="game-window">
    <div class="screen">
        <div id="ui-p" class="pitch" style="display:block;"><div class="cage" id="cage"></div><div id="ball">âš½</div></div>
        <div id="ui-c" style="display:none;" class="big-val"><span id="c-txt" style="color:var(--green);">1.00x</span></div>
        <div id="ui-r" style="display:none;" class="big-val"><span id="r-txt" style="color:var(--gold);">0</span></div>
        <div id="ui-d" style="display:none;" class="big-val"><span id="d-txt">ðŸŽ²</span></div>
    </div>

    <div id="ctrl-p" class="btn-grid">
        <button class="btn-gold" onclick="playP('left')">GAUCHE</button>
        <button class="btn-gold" onclick="playP('right')">DROITE</button>
    </div>
    <div id="ctrl-c" style="display:none;">
        <button id="c-btn" class="btn-gold" style="width:100%;" onclick="playC()">MISER 500F</button>
    </div>
    <div id="ctrl-r" style="display:none;">
        <input type="number" id="r-in" placeholder="NumÃ©ro (0-36)" style="text-align:center;">
        <button class="btn-gold" style="width:100%;" onclick="playR()">TOURNER (500F)</button>
    </div>
    <div id="ctrl-d" style="display:none;">
        <button class="btn-gold" style="width:100%;" onclick="playD()">LANCER (500F)</button>
    </div>

    <div style="margin-top:15px; display:flex; gap:10px;">
        <button onclick="openM('retrait')" style="background:#444; border:none; color:white; flex:1; padding:10px; border-radius:8px;">RETRAIT</button>
    </div>
    <p id="info" style="color:var(--gold); font-weight:bold; margin-top:15px; height:20px;"></p>
</div>

<div id="modal" class="modal">
    <div class="modal-content">
        <h2 id="m-titre" style="color:var(--gold); margin-top:0;">RETRAIT</h2>
        <input type="text" id="m-nom" placeholder="Nom Complet">
        <input type="number" id="m-num" placeholder="NumÃ©ro Wave">
        <button class="btn-gold" style="width:100%;" onclick="valider()">CONFIRMER</button>
        <button onclick="closeM()" style="background:none; border:none; color:gray; width:100%; margin-top:10px;">Annuler</button>
    </div>
</div>

<a href="https://wa.me/2250707656355?text=DÃ©pÃ´t%20NDIBET" class="footer-nav">FAIRE UN DÃ‰PÃ”T (WAVE)</a>

<script>
    let bal = 5000;
    let canAction = true;
    let isC = false;
    let cV = 1.0;
    let cI;

    function speak(t) {
        let u = new SpeechSynthesisUtterance(t);
        u.lang = 'fr-FR'; window.speechSynthesis.speak(u);
    }

    function setGame(g, el) {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        el.classList.add('active');
        ['p','c','r','d'].forEach(x => {
            document.getElementById('ui-'+x).style.display = (x === g ? (x==='p'?'block':'flex') : 'none');
            document.getElementById('ctrl-'+x).style.display = (x === g ? 'block' : 'none');
        });
    }

    // PENALTY FIXÃ‰ - ANTI BUG
    function playP(dir) {
        if(!canAction) return;
        canAction = false;
        const b = document.getElementById('ball');
        const cage = document.getElementById('cage');
        const info = document.getElementById('info');

        b.style.bottom = "155px"; b.style.left = dir === 'left' ? "35%" : "65%";
        
        setTimeout(() => {
            let win = Math.random() > 0.5;
            if(win) {
                bal += 500; cage.style.borderColor = "var(--green)";
                info.innerText = "âš½ BUT !!! +500F"; speak("But magnifique !");
            } else {
                bal -= 200; cage.style.borderColor = "var(--red)";
                info.innerText = "ðŸ§¤ ARRÃŠTÃ‰ ! -200F"; speak("Le gardien l'a captÃ©.");
            }
            document.getElementById('solde').innerText = bal;

            setTimeout(() => {
                b.style.transition = "none"; 
                b.style.bottom = "25px"; b.style.left = "50%";
                cage.style.borderColor = "white"; info.innerText = "";
                setTimeout(() => { 
                    b.style.transition = "all 0.5s ease-out"; 
                    canAction = true; 
                }, 50);
            }, 1200);
        }, 500);
    }

    function playD() {
        let d = Math.floor(Math.random()*6)+1;
        document.getElementById('d-txt').innerText = "ðŸŽ² " + d;
        bal += (d > 3) ? 500 : -500;
        speak(d > 3 ? "GagnÃ© !" : "Perdu !");
        document.getElementById('solde').innerText = bal;
    }

    function playR() {
        let i = document.getElementById('r-in').value;
        if(!i || i > 36) return speak("Choisissez un numÃ©ro entre 0 et 36.");
        let r = Math.floor(Math.random()*37);
        document.getElementById('r-txt').innerText = r;
        if(parseInt(i) === r) { bal += 17500; speak("Jackpot ! NumÃ©ro "+r); }
        else { bal -= 500; speak("Le numÃ©ro Ã©tait le "+r); }
        document.getElementById('solde').innerText = bal;
    }

    function playC() {
        let b = document.getElementById('c-btn');
        if(!isC) {
            isC = true; cV = 1.0; b.innerText = "CASH OUT"; speak("DÃ©collage !");
            let boom = (Math.random()*4 + 1.2).toFixed(2);
            cI = setInterval(() => {
                cV += 0.1; document.getElementById('c-txt').innerText = cV.toFixed(2) + "x";
                if(cV >= boom) {
                    clearInterval(cI); isC = false; b.innerText = "BOOM !"; bal -= 500;
                    document.getElementById('solde').innerText = bal; speak("Explosion.");
                }
            }, 100);
        } else {
            clearInterval(cI); isC = false;
            let win = Math.floor(500 * cV); bal += win;
            document.getElementById('solde').innerText = bal; b.innerText = "MISER 500F";
            speak("GagnÃ© " + win);
        }
    }

    function openM(a) { document.getElementById('modal').style.display='flex'; }
    function closeM() { document.getElementById('modal').style.display='none'; }
    function valider() {
        let n = document.getElementById('m-nom').value;
        let num = document.getElementById('m-num').value;
        if(!n || !num) return alert("Remplis tout !");
        let u = `https://wa.me/2250707656355?text=NDIBET%20RETRAIT%0ANom:%20${n}%0ANum:%20${num}%0AMt:%20${bal}F`;
        window.location.href = u;
    }
</script>
</body>
</html>
